From 80f9819b6233f9f9b5fd44f0e4cad026e5d048c2 Mon Sep 17 00:00:00 2001
From: Albert Astals Cid <aacid@kde.org>
Date: Wed, 13 Sep 2017 23:09:45 +0200
Subject: isImageInterpolationRequired: Fix divide by 0 on broken documents

Bug #102688

diff --git a/splash/Splash.cc b/splash/Splash.cc
index 46b8ce2..39fc7d6 100644
--- a/splash/Splash.cc
+++ b/splash/Splash.cc
@@ -4134,7 +4134,7 @@ SplashError Splash::arbitraryTransformImage(SplashImageSource src, SplashICCTran
 static GBool isImageInterpolationRequired(int srcWidth, int srcHeight,
                                           int scaledWidth, int scaledHeight,
                                           GBool interpolate) {
-  if (interpolate)
+  if (interpolate || srcWidth == 0 || srcHeight == 0)
     return gTrue;
 
   /* When scale factor is >= 400% we don't interpolate. See bugs #25268, #9860 */
-- 
cgit v0.10.2

