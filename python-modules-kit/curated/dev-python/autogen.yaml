# The dev_python_compat_rule will handle situations where python2 support has been deprecated.
#
# An ebuild pyxattr-(latestversion) will be created.
# An ebuild pyxattr-compat-(lastpy2version) will be created.
# pyxattr will still "advertise" python2 support. If python2 support is selected, the older
# pyxattr-compat will be RDEPENDed upon so it will be installed to satisfy those packages who
# need it.

dev_python_compat_rule:
  defaults:
    cat: dev-python
    python_compat: python3+
  generator: pypi-compat-1
  packages:
    - pyxattr:
        compat: '0.6.1'
        blocker: '!<dev-python/pyxattr-0.7.1'
        python_compat: python3+
        rdepend: 'sys-apps/attr:='
        depend: 'sys-apps/attr:='
        description: Python interface to xattr
        homepage: https://pyxattr.k1024.org
        license: LGPL-2.1
        body: |
          distutils_enable_tests pytest
          distutils_enable_sphinx doc dev-python/recommonmark

          python_prepare_all() {
            sed -i -e 's:, "-Werror"::' setup.py || die
            # Bug 548486
            sed -e "s:html_theme = 'default':html_theme = 'classic':" -i doc/conf.py || die
            distutils-r1_python_prepare_all
          }

dev_python_autogen_rule:
  defaults:
    cat: dev-python
    python_compat: python3+
  generator: pypi-1
  packages:
    - aiohttp
    - aiohttp-socks:
        python_compat: python3+ pypy3
    - arrow:
        python_compat: python2+ pypy{,3}
    - async_timeout:
        python_compat: python3+ pypy3
    - authres:
        - versions:
            - 1.1.1:
                python_compat: python2+ pypy3
    - backports-functools-lru-cache:
        python_compat: python2+ pypy{,3}
        pypi_name: backports.functools-lru-cache
    - bitarray:
        python_compat: python2+ pypy3
    - cffi:
        python_compat: python2+ pypy{,3}
    - cloudflare
    - cryptography:
        python_compat: python2+ pypy{,3}
    - construct:
        python_compat: python2+ pypy3
    - cython:
        python_compat: python2+ pypy3
        pypi_name: Cython
    - daemonize:
        python_compat: python2+ pypy3
    - dns-lexicon
    - dnspython:
        python_compat: python2+ pypy3
    - entrypoints:
        python_compat: python2+ pypy3
    - feedgenerator:
        python_compat: python2+ pypy{,3}
    - flake8:
        python_compat: python2+ pypy{,3}
    - flask-jwt:
        python_compat: python2+ pypy{,3}
    - h5py:
        python_compat: python2+ pypy{,3}
    - importlib_metadata:
        python_compat: python2+ pypy{,3}
    - ipy:
        python_compat: python2+ pypy{,3}
    - psutil:
        python_compat: python2+ pypy{,3}
    - pycares:
        python_compat: python3+ pypy3
    - python-digitalocean
    - pyxdg:
        python_compat: python2+ pypy3
    - pyyaml:
        python_compat: python2+ pypy3
        pypi_name: PyYAML
    - python-dateutil:
        python_compat: python2+ pypy{,3}
    - twine:
        python_compat: python3+ pypy3
    - tqdm:
        python_compat: python2+ pypy3
    - terminado:
        python_compat: python3+
    - readme_renderer:
        python_compat: python2+ pypy3
    - pygments:
        - versions:
            - 2.5.2:
                python_compat: python2+ pypy3
    - msgpack
    - pop-config
    - pop
    - py:
        python_compat: python2+ pypy{,3}
    - pymongo:
        python_compat: python2+
    - flake8-polyfill:
        python_compat: python2+
    - pep8-naming:
        python_compat: python2+
    - pyjwt:
        python_compat: python2+ pypy{,3}
    - pyzmq:
        python_compat: python2+ pypy{,3}
    - PySocks:
        python_compat: python2+ pypy{,3}
    - certifi:
        python_compat: python2+ pypy{,3}
    - docutils:
        python_compat: python2+ pypy3
    - dbus-python:
        python_compat: python2+ pypy{,3}
    - chardet:
        python_compat: python2+ pypy{,3}
    - enum34:
        python_compat: python2_7 pypy
    - idna:
        python_compat: python2+ pypy{,3}
    - ipaddress:
        python_compat: python2+ pypy{,3}
    - lxml:
        python_compat: python2+ pypy3
    - mako:
        python_compat: python2+ pypy{,3}
    - markupsafe:
        python_compat: python2+ pypy{,3}
    - mwparserfromhell:
        python_compat: python2+ pypy{,3}
    - pyblake2:
        python_compat: python2+ pypy{,3}
    - pycparser:
        python_compat: python2+ pypy{,3}
    - ply:
        python_compat: python2+ pypy{,3}
    - pyelftools:
        python_compat: python2+ pypy{,3}
    - pyopenssl:
        python_compat: python2+ pypy{,3}
    - requests:
        python_compat: python2+ pypy{,3}
    - setuptools:
        python_compat: python2+ pypy{,3}
    - six:
        python_compat: python2+ pypy{,3}
    - urllib3:
        python_compat: python2+ pypy{,3}
    - zope-component:
        python_compat: python2+ pypy3
    - zope-configuration:
        python_compat: python2+ pypy3
    - zope-deferredimport:
        python_compat: python2+ pypy3
    - zope-deprecation:
        python_compat: python3+ pypy3
    - zope-event:
        python_compat: python2+ pypy3
    - zope-exceptions:
        python_compat: python2+ pypy3
    - zope-hookable:
        python_compat: python2+ pypy3
    - zope-interface:
        python_compat: python2+ pypy3
    - zope-i18nmessageid:
        python_compat: python2+ pypy3
    - zope-location:
        python_compat: python2+ pypy3
    - zope-proxy:
        python_compat: python2+ pypy3
    - zope-schema:
        python_compat: python2+ pypy3
    - zope-testing:
        python_compat: python2+ pypy3
    - zope-testrunner:
        python_compat: python2+ pypy3


